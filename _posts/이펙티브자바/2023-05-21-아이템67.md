---
title: "아이템67 : 최적화는 신중히 하라"
author: bumoo
date: 2023-05-21 20:13:00 +0900
categories: [이펙티브 자바]
tags: [이펙티브 자바]
---

## 빠른 프로그램보다는 좋은 프로그램을 작성하라.

최적화는 좋은 결과보다는 해로운 결과로 이어지기 쉽고, 빠르지도 않고 제대로 동작하지도 않으면서 수정하기 어려운 소프트웨어를 탄생시키는 것이다.

좋은 프로그램은 정보 은닉 원칙을 따르므로 내부를 독립적으로 설계할 수 있다. 따라서 나머지에 영향을 주지 않고 다시 설계할 수 있다.

구현상의 문제는 나중에 최적화해 해결할 수 있지만, 아키텍처의 결함이 성능을 제한한다면, 전체를 다시 작성하지 않고 해결 불가능하다.

## 성능을 제한하는 설계를 피하라

변경하기 가장 어려운 설계 요소는 컴포넌트끼리, 혹은 외부 시스템과의 소통 방식이다.

API, 네트워크 프로토콜, 영구 저장용 데이터 포맷 등이 있다.

해당 요소들은 완성 후 변경이 어렵거나, 불가능할 수 있고, 시스템 성능을 심각하게 제한할 수 있다.

## API를 설계할 때 성능에 주는 영향을 고려하라

`public` 타입을 가변으로 만들면(내부 데이터를 변경할 수 있게 만들면) 불필요한 방어적 복사를 수없이 유발할 수 있다.

컴포지션이 가능하지만, 상속 방식으로 설계한 클래스는 상위 클래스에 영원히 종속되며, 성능 제약까지 물려 받는다.

인터페이스도 있는데 구현 타입을 사용하면, 특정 구현체에 종속되고, 더 빠른 구현체가 나와도 이용하지 못한다.

**깨끗하고 명확한 구조를 갖춘 프로개름을 완성한 다음에야 최적화를 고려해볼 차례다.**
