---
title: "아이템71 : 필요 없는 검사 예외 사용은 피하라"
author: bumoo
date: 2023-05-23 21:03:00 +0900
categories: [이펙티브 자바]
tags: [이펙티브 자바]
---

## 검사 예외

검사 예외는 발생한 문제를 프로그래머가 처리하여 안전성을 높이게끔 해준다. 하지만, 과하게 사용하면 오히려 쓰기 불편한 API가 된다.

검사 예외와 비검사 예외 중 어느 것을 선택해야 할지는 그 예외를 어떻게 다룰지 생각해보면 알 수 있다.

```java
} catch (TheCheckedException e) {
    throw new AssertionError(); // 일어날 수 없다.
}
```

```java
} catch (TheCheckedException e) {
    e.printStackTrace();
    System.exit(1);
}
```

더 나은 방법이 없다면, 비검사 예외를 선택해야 한다.

## 검사 예외가 주는 부담

검사 예외가 프로그래머에게 주는 부담은 단 하나의 검사 예외만 던질 때 특히 크다.

이미 다른 검사 예외가 있다면 `catch`문 하나 추가하면 끝이다.

하지만 하나라면 그 예외 때문에 `try` 블록을 추가해야하고, 스트림에서 사용하지 못한다.

## 검사 예외를 회피하는 방법

검사 예외를 회피하는 가장 쉬운 방법은 옵셔널을 반환하는 것이다.

해당 방법의 단점은 예외가 발생한 부가 정보를 담을 수 없다는 것이다.

반면, 예외를 사용하면 부가 정보를 제공할 수 있다.

다른 방법으로는 검사 예외를 던지는 메소드를 2개로 쪼개 비검사 예외로 변경할 수 있다.

```java
try {
    obj.action(args);
} catch (TheCheckedException e) {
    ... // 예외 상황에 대처한다.
}
```

검사 예외를 던지는 메소드이다.

```java
if (obj.actionPermitted(args)) {
    obj.action(args);
} else {
    ... // 예외 상황에 대처한다.
}
```
상태 검사 메소드와 비검사 예외를 던지도록 리팩토링했다.

리팩토링을 하면 유연한 API를 제공할 수 있다.

추가로 메소드가 성공하리라는 걸 알고, 실패 시 스레드 중단하길 원한다면 아래와 같이 작성한다.

```java
obj.action(args);
```