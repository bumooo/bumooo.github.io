---
title: "Redis의 성능 최적화"
author: bumoo
date: 2024-12-30 19:52:00 +0900
categories: ["대규모 트래픽"]
tags: ["Redis"]
---


## 메모리 최적화

데이터 압축 사용 및 메모리 정리
- 메모리 기반 데이터 저장소이므로, 메모리 사용량을 최소하는 것이 성능 최적화에 중요
- 데이터를 압축하거나 효율적으로 저장하는 방법으로 줄일 수 있음
- `ziplist`, `intset`과 같은 메모리 효율적인 자료구조를 사용하여 저장 공간 최적화

LRU/LFU 정책
- LRU(Least Recently Used) 또는 LFU(Least Frequently Used) 알고리즘을 사용하여 데이터 자동 삭제
- 메모리 부족시, 오래 사용되지 않은 데이터 삭제함으로써 메모리 공간 확보

## 적절한 영속성 설정
![RDB vs AOF](https://github.com/user-attachments/assets/4a7cfa86-09f3-4a63-a20f-55e82fd8c269)

RDB
- **주기적으로 스냅샷 형태로 디스크에 저장**
- 시스템 재시작 시 저장된 스냅샷을 사용하여 데이터 복구
- 주기적으로 저장 작업을 하므로, 시스템 성능에 미치는 영향이 적음
- 스냅샷 간격 동안의 변경 사항은 저장되지 않아 데이터 손실 가능성이 있음

AOF
- **모든 데이터 변경 사항을 순차적으로 기록**
- 시스템 재시작 시 모든 변경 기록을 재생하여 완전한 복구 가능
- 지속적으로 로그를 기록해야 하므로 시스템 부하가 RDB 보다 높음
- AOF 파일 크기는 시간 지남에 따라 커지므로 주기적으로 파일 압축 또는 재작성 작업 필요

환경에 맞는 영속성 설정
- 고성능을 요구하는 환경이고, 데이터 손실 가능성이 크지 않은 경우는 RDB 사용
- 데이터 손실을 최소화해야 하는 상황은 AOF 사용
- RDB, AOF 병합하여 설정하면 성능, 데이터 안정성 균형을 맞출 수 있음

## Redis Cluster 파티셔닝 활용 
- 파티셔닝을 통해 데이터를 여러 노드에 분산 저장하여 수평적 확장성 제공
- 해시 슬롯을 기반으로 여러 노드에 분산시켜, 데이터 양을 줄임으로써 성능 저하 없이 대규모 데이터 처리 가능

## TTL (Time To Live) 설정
자동 데이터 제거
- 각 키에 대해 TTL 설정하여, 일정 시간이 지나면 자동으로 데이터 삭제하는 기능
- 불필요한 데이터가 계속 메모리를 차지하지 않도록 관리 가능

메모리 관리 최적화
- 오래된 데이터가 메모리에서 자동으로 제거되므로 지속적인 메모리 사용량을 줄일 수 있다.

## Pipelining
네트워크 왕복 횟수 감소
- 여러 명령어를 한 번에 서버에 보내는 방식으로 네트워크 왕복 횟수를 줄여 네트워크 성능 최적화
- 개별적으로 처리하는 것보다 빠르게 처리 가능

명렁어 처리 속도 향상
- 네트워크 지연을 최소화하고 동시 처리가 가능해 성능 향상
