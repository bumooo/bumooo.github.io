---
title: "비동기 처리 아키텍처 개요"
author: bumoo
date: 2024-12-22 23:56:00 +0900
categories: ["대규모 트래픽"]
tags: [비동기]
---

## 비동기 처리의 개념
- 작업을 병렬로 수행하는 개념으로, 하나의 작업이 완료기까지 기다리지 않고 다른 작업을 진행하는 방식
- 대표적으로 I/O 작업에서 대기 시간이 길어질 경우, 프로그램은 다른 작업을 처리하며 대기 시간을 사용

## 단일 프로세스에서 비동기 처리
- 작은 시스템에서 자원의 효율적 사용이 중요
- I/O 작업, 파일 읽기, 네트워크 요청은 처리 시간이 길어질 수 있음 
- 비동기를 통해 대기 시간을 활용해 다른 작업을 진행함으로 성능 향상 가능

## Java 비동기 처리의 기본 구성
- 스레드 풀(Thread Pool)
- 이벤트 루프(Event Loop) 활용한 처리

## 대규모 시스템에서의 비동기 처리
- 대규모 시스템은 많은 요청이 동시에 들어오고, 요청을 효율적으로 처리하기 위해 비동기 처리 필수
- 트래픽이 많은 환경에서 비동기 처리를 통해 시스템의 확장성과 안전성 보장
- 비동기 메시징 시스템 사용하여 아키텍처 확장

## 비동기 메시징 시스템 이해
- 시스템 간 또는 애플리케이션 내부의 여러 구성 요소 간 통신을 비동기적으로 처리하는 방식
- 메시지를 주고 받는 각 구성 요소가 **독립적**으로 작업을 수행할 수 있어, **확장성**과 **성능을 크게 향상**
- 메시지 큐(Message Queue)와 메시지 브로커(Message Broker)가 비동기 메시징 시스템의 핵심 요소

## 메시지 큐와 메시지 브로커
- 메시지 큐
  - 생산자는 메시지 큐로 메시지 전송
  - 소비자가 메시지 큐에서 메시지를 꺼내어 처리
- 메시지 브로커
  - 발행자는 메시지 브로커로 메시지 전달
  - 구독자는 특정 주제(topic)에 메시지 구독
  - 이벤트가 발생하면 여러 구독자에게 메시지 전달
  - 여러 구성요소가 동일한 메시지를 실시간 처리 가능

## 메시징 시스템을 통한 비동기 처리
- 한 서비스가 작업을 완료하기 전 메시지를 큐에 넣고, 다른 서비스가 비동기적으로 이를 처리하여 시스템의 부하를 줄읾

## Message Queue
![Message Queue](https://github.com/user-attachments/assets/f52e5da1-d213-44e3-ad52-e00d70accd0e)
- 작업 큐는 순차적으로 저장된 작업을 관리
- `Producer`와 `Consumer`가 독립적으로 동작
- 시스템 부하에 따라 `Consumer`를 유동적으로 확장 가능
- 트래픽이 많아지는 경우 `Consumer`를 늘려 메시지 처리 속도 증가
- 트래픽이 순간적으로 증가해도 메시지 큐에 메시지를 들고 있어 시스템 안전성 보장

> `Producer` : 메시지를 생성하여 메시지 큐에 전송<br>
> `Consumer` : 메시지 큐에서 메시지를 가져와 작업 처리
{: .prompt-info }

## Event-Driven Architecture
![Event-Driven Architecture](https://github.com/user-attachments/assets/9de290ad-b956-47ad-8321-7f7456454c69)
- 서비스 간 느슨한 결합과 실시간 반응성을 제공하는 비동기 메시징 시스템
- 시스템 내에서 발생하는 상태 변화를 이벤트로 처리하고, 각 서비스는 이 이벤트에 비동기적으로 반응하는 구조

## 비동기 시징 시스템의 확장성과 안전성 보장
- 메시지 큐나 이벤트 버스는 필요에 따라 소비자 또는 서비스 인스턴스를 동적으로 추가할 수 있어, 대규모 트래픽을 처리하기 위한 확장성 보장
- 각 서비스가 독립적으로 동작할 수 있어 시스템의 한 부분이 문제 발생하더라도 전체 시스템이 중단되지 않고 작동
